#!/bin/bash

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSH —Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è —Ç—É–Ω–Ω–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —É–¥–∞–ª—ë–Ω–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ apply-configs.sh (—Å–∏–º–ª–∏–Ω–∫)

set -e

echo "–ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSH —Å–µ—Ä–≤–µ—Ä–∞..."

# SSH server —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ install-base.sh
# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –±—É–¥–µ—Ç –ø—Ä–∏–º–µ–Ω–µ–Ω–∞ —á–µ—Ä–µ–∑ apply-configs.sh

echo ""
echo "‚úÖ SSH —Å–µ—Ä–≤–µ—Ä –≥–æ—Ç–æ–≤ –∫ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ"
echo ""
echo "‚ÑπÔ∏è  –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è SSH –±—É–¥–µ—Ç –ø—Ä–∏–º–µ–Ω–µ–Ω–∞ —á–µ—Ä–µ–∑ apply-configs.sh"
echo ""
echo "üìå –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã SSH:"
echo "  ‚Ä¢ vagrant ssh                           - –æ–±—ã—á–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ"
echo "  ‚Ä¢ vagrant ssh -- -D7777                 - SOCKS5 –ø—Ä–æ–∫—Å–∏ –Ω–∞ –ø–æ—Ä—Ç—É 7777"
echo "  ‚Ä¢ vagrant ssh -- -L8080:localhost:80    - –ø—Ä–æ–±—Ä–æ—Å –ø–æ—Ä—Ç–∞ 80 –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—ã–π 8080"
echo "  ‚Ä¢ vagrant ssh -- -R9000:localhost:3000  - –æ–±—Ä–∞—Ç–Ω—ã–π —Ç—É–Ω–Ω–µ–ª—å"

# –ï—Å–ª–∏ —É–∫–∞–∑–∞–Ω –ø—Ä–∏–≤–∞—Ç–Ω—ã–π IP, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø
if [[ -n "${PRIVATE_IP}" ]]; then
    echo "  ‚Ä¢ ssh vagrant@${PRIVATE_IP} -D7777     - –ø—Ä—è–º–æ–π SOCKS5 —á–µ—Ä–µ–∑ –ø—Ä–∏–≤–∞—Ç–Ω—É—é —Å–µ—Ç—å"
fi

echo ""
